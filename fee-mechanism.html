<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fee Mechanism :: Brand Docs</title>
    <meta name="generator" content="Antora 1.0.0">


    <!-- Primary Meta Tags -->
    <meta name="title" content="Starknet Documentation">
    <meta name="description" content="Reference documentation for developers building on Starknet.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.starknet.io/">
    <meta property="og:title" content="Starknet Documentation">
    <meta property="og:description" content="Reference documentation for developers building on Starknet.">
    <meta property="og:image" content="https://www.starknet.io/starknet-docs-card.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.starknet.io/">
    <meta property="twitter:title" content="Starknet Documentation">
    <meta property="twitter:description" content="Reference documentation for developers building on Starknet.">
    <meta property="twitter:image" content="https://www.starknet.io/starknet-docs-card.png">  <link rel="stylesheet" href="_/css/vendor/tabs.css">
  <link id="theme" rel="stylesheet" title="Default" href="_/css/site.css?new">
  <link rel="stylesheet" title="Dark" href="_/css/dark-site.css?new">
  <link rel="stylesheet" href="_/css/vendor/tabs.css">
  <link rel="stylesheet" href="_/css/home.css">
    <script>var uiRootPath = '_'</script>
    <script src="_/js/vendor/medium-zoom.js?new"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>

    <script>
        (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3529885,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
<link rel="icon" href="_/img/favicon/favicon.ico" type="image/x-icon">

<!-- For all browsers -->
<link rel="icon" type="image/png" sizes="32x32" href="_/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="_/img/favicon-16x16.png">

<!-- For Google and Chrome -->
<link rel="icon" type="image/png" sizes="192x192" href="_/img/favicon/android-chrome-192x192.png">

<!-- For iPad -->
<link rel="apple-touch-icon" type="image/png" sizes="167x167" href="_/img/favicon/apple-touch-icon.png">
<!-- For iPhone -->
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="_/img/favicon/apple-touch-icon.png">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="http://localhost:5252" class="starknet-logo"></a>
        <div class="vertical-divider desktop-only"></div>
        <a href="http://localhost:5252" class="docs-logo desktop-only">Docs</a>
      </div>
      <!--<a class="navbar-item" href="http://localhost:5252">Brand Docs</a>-->
      <div id="autocomplete" class="autocomplete-root"></div>
      <div class="header-right">
        <div class="theme-toggle-container mobile-only">
          <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle"></button>
        </div>
        <button class="navbar-burger" data-target="topbar-nav">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
    
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="navbar-link" href="https://starknet.io/" target="_blank">Starknet Home</a>
        </div>
        <div class="navbar-item">
          <a class="navbar-link" href="https://starknet.io/building-on-starknet/tutorials/" target="_blank">Tutorials</a>
        </div>
        <div class="theme-toggle-container">
          <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        </div>
      </div>
    </div>
  </nav>
</header><div class="toolbar" role="navigation">
  <div class="components-versions desktop-only">
  </div>
  <span></span>
  <span></span>
  <a href="index.html" class="home-link is-current mask-svg-center"></a>
  <div id="mobile-autocomplete" class="mobile-only"></div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="#">Project XYZ</a></li>
    <li>Quickstart</li>
    <li><a href="index.html">Brand&#8217;s Hardware &amp; Software Requirements</a></li>
  </ul>
</nav>
  <div class="edit-this-page">
    <a href="http://example.com/project-xyz/blob/main/index.adoc"><img class="pencil">Edit this Page</a>
  </div>
</div>
<div class="body">
<div class="nav-container" data-component="xyz" data-version="5.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="#">Project XYZ</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle mask-svg-center"></button>
        <span>
    <a 
       class="nav-link nav-link-with-toggle"
     href="#">Quickstart</a>
        </span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a 
       class="nav-link"
     href="index.html">Brand&#8217;s Hardware &amp; Software Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a 
       class="nav-link"
     href="#cu-solet">Cu Solet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a 
       class="nav-link"
     href="#english+中文">English + 中文</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
       class="nav-link"
     href="starknet-events.html">Starknet events</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
       class="nav-link"
     href="table-example.html">Table example</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
       class="nav-link"
     href="token-bridge.html">Token bridge</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
       class="nav-link"
     href="fee-mechanism.html">Fee Mechanism</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
       class="nav-link"
     href="upcoming_versions.html">Upcoming versions</a>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle mask-svg-center"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a 
       class="nav-link"
     href="#">Keyboard Shortcuts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a 
       class="nav-link"
     href="#">Importing and Exporting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a 
       class="nav-link"
     href="#some-code">Some Code</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
    <div class="navbar-end mobile-only">
      <div class="hr-divider"></div>
      <div class="navbar-item-flex">
        <a class="navbar-link" href="https://starknet.io/" target="_blank">Starknet Home</a>
        <a class="link-icon" href="https://starknet.io/" target="_blank"></a>
      </div>
      <div class="navbar-item-flex">
        <a class="navbar-link" href="https://starknet.io/building-on-starknet/tutorials/" target="_blank">Tutorials</a>
        <a class="link-icon" href="https://starknet.io/building-on-starknet/tutorials/" target="_blank"></a>
      </div>
    </div>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Fee Mechanism</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will review StarkNet Alpha fee mechanism. If you want to skip the motivation and deep dive into the mechanism, you can skip directly to the final <a href="#overall-fee">formula</a>. This section focuses on fees paid by an account on L2. For information about messaging fees that are paid on L1, see <a href="../L1-L2_Communication/messaging-mechanism.html#l1&#8212;&#8203;l2-message-fees">L1 → L2 message fees</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Users can specify the maximum fee that they are willing to pay for a transaction via the <code>max_fee</code> <a href="../Blocks/transactions.html#max_fee">field</a>.</p>
</div>
<div class="paragraph">
<p>The only limitation on the sequencer (enforced by the StarkNet OS) is that the actual fee charged is bounded by <code>max_fee</code>, but for now, StarkWare&#8217;s sequencer will only charge the fee required to cover the proof cost (potentially less than the max fee).</p>
</div>
<div class="paragraph">
<p>Presently, the sequencer only takes into account L1 costs involving proof submission. There are two components affecting the L1 footprint of a transaction:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#computation">computational complexity</a>: the heavier the transaction, the larger its portion in the proof verification cost.</p>
</li>
<li>
<p><a href="#on-chain-data">on chain data</a>: L1 calldata cost originating from <a href="../Data_Availability/on-chain-data.html">data availability</a> and L2→L1 messages.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fee_units"><a class="anchor" href="#_fee_units"></a>Fee Units</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fee is denominated in ETH (this may change in future versions). Each transaction is associated with a gas estimate (explained below), and combining this with the gas price yields the estimated fee.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_much_fee_is_charged_high_level_overview"><a class="anchor" href="#_how_much_fee_is_charged_high_level_overview"></a>How much fee is charged? High-level overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_computation"><a class="anchor" href="#_computation"></a>Computation</h3>
<div class="paragraph">
<p>Let&#8217;s analyze the correct metric for measuring transaction complexity. For simplicity, we will ignore Cairo&#8217;s builtins for the sake of the explanation, then see later how to refer to them.</p>
</div>
<div class="sect3">
<h4 id="_without_builtins"><a class="anchor" href="#_without_builtins"></a>Without builtins</h4>
<div class="paragraph">
<p>Recall that a Cairo program execution yields an execution trace. When proving a StarkNet block, we aggregate all the transactions appearing in that block to the execution trace.</p>
</div>
<div class="paragraph">
<p>StarkNet&#8217;s prover generates proofs for execution traces, up to some maximal length \(L\) (Derived from the specs of the proving machine and the desired proof latency). Tracking the execution trace length associated with each transaction is simple.
Each assertion over field elements (such as verifying addition/multiplication over the field) requires the same, constant number of trace cells (this is where our &#8220;no-builtins&#8221; assumption kicks in! Obviously Pedersen occupies more trace cells than addition). Therefore, in a world without builtins, the fee of the transaction is correlated with \(\text{TraceCells}[tx]/L\).</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_builtins"><a class="anchor" href="#_adding_builtins"></a>Adding builtins</h4>
<div class="paragraph">
<p>The Cairo execution trace is separated&#8201;&#8212;&#8201;and each builtin has its own slot. We have to mind this slot allocation when determining the fee.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s go over a concrete example first. For example, imagine the following trace that the prover will occupy:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">(up to) 500,000,000 Cairo Steps</th>
<th class="tableblock halign-left valign-top">(up to) 20,000,000 Pedersen hashes</th>
<th class="tableblock halign-left valign-top">(up to) 4,000,000 signature verifications</th>
<th class="tableblock halign-left valign-top">(up to) 10,000,000 range checks</th>
</tr>
</thead>
</table>
<div class="paragraph">
<p>The proof will be closed and sent to L1 when any of these components becomes full. It&#8217;s important to realize that the division to builtins must be predetermined! We can&#8217;t decide on the fly to have proof with 20,000,001 Pedersen and nothing else.</p>
</div>
<div class="paragraph">
<p>Suppose, for example, that a transaction uses 10,000 Cairo steps and 500 Pedersen hashes. We can squeeze at most 40,000 such transactions into our hypothetical trace (20,000,000/500). Therefore, its gas price will be correlated with 1/40,000 the cost of submitting proof. Notice we completely ignored the number of Cairo steps in this transaction performance estimation, as it is not the limiting factor (since 500,000,000/10,000 &gt; 20,000,000/500). With this example in mind, we can now formulate the exact fee associated with L2 computation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_general_case"><a class="anchor" href="#_general_case"></a>General Case</h4>
<div class="paragraph">
<p>For each transaction, the sequencer calculates a vector <code>CairoResourceUsage</code> holding:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Number of Cairo steps</p>
</li>
<li>
<p>Number of applications of each Cairo builtin (e.g., five range checks and two Pedersens)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sequencer crosses this information with the <code>CairoResourceFeeWeights</code> vector. For each resource type (step or a specific builtin application), <code>CairoResourceFeeWeights</code> has an entry that specifies the relative gas cost of that component in the proof. Going back to the above example, if the cost of submitting a proof with 20,000,000 Pedersen hashes is roughly 5m gas, then the weight of the Pedersen builtin is 0.25 gas per application (5,000,000/20,000,000). The sequencer has a pre-defined weights vector, in accordance with the proof parameters.</p>
</div>
<div class="paragraph">
<p>The sequencer will charge only according to the limiting factor! Therefore the fee is correlated with:</p>
</div>
<div class="stemblock">
<div class="content">
\[\max_k[\text{CairoResourceUsage}_k \cdot \text{CairoResourceFeeWeights}_k]\]
</div>
</div>
<div class="paragraph">
<p>Where \(k\) here enumerates the Cairo resource components, namely: number of steps and built-ins used.</p>
</div>
<div class="paragraph">
<p>The weights are:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cairo step</th>
<th class="tableblock halign-left valign-top">Pedersen</th>
<th class="tableblock halign-left valign-top">Range check</th>
<th class="tableblock halign-left valign-top">ECDSA</th>
<th class="tableblock halign-left valign-top">Bitwise</th>
<th class="tableblock halign-left valign-top">EC_OP</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.05 gas/step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6 gas/application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.8 gas/application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">102.4 gas/application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2 gas/application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">51.2 gas/application</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_on_chain_data"><a class="anchor" href="#_on_chain_data"></a>On Chain Data</h3>
<div class="paragraph">
<p>The on-chain data associated with a transaction is composed of three parts</p>
</div>
<div class="ulist">
<ul>
<li>
<p>storage updates</p>
</li>
<li>
<p>l2→l1 messages</p>
</li>
<li>
<p>deployed contracts</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_storage_updates"><a class="anchor" href="#_storage_updates"></a>Storage Updates</h4>
<div class="paragraph">
<p>Whenever a transaction updates a key at the storage of some contract, the following 32 byte words reach L1 as calldata:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contract_address</p>
</li>
<li>
<p>number of updated keys in that contract</p>
</li>
<li>
<p>key to update</p>
</li>
<li>
<p>new value</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that only the most recent value reaches L1. That is, the transaction&#8217;s fee only depends on the number of <strong>unique</strong> storage updates (if the same storage cell is updated multiple times within the transaction, the fee remains that of a single update).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see the exact <a href="../Data_Availability/on-chain-data.html#format">format</a>.</p>
</div>
<div class="paragraph">
<p>Let \(c_w\) denote the L1 calldata cost of a 32 byte word, measured in gas. With 16 gas per byte we have \(c_w=16\cdot 32=512\).
Consequently, the associated storage update fee for a transaction updating \(n\) unique contracts and \(m\) unique keys is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\text{gas_price}\cdot c_w\cdot\underbrace{(2n+2m)}_{\text{number of words}}\]
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that there are many possible improvements to the above pessimistic estimation that will be gradually presented in future versions of StarkNet. For example, if different transactions within the same block update the same storage cell, there is no need to charge both of them (only the latest value reaches L1). In the future, StarkNet may include a refund mechanism for such cases.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_l2l1_messages"><a class="anchor" href="#_l2l1_messages"></a>L2→L1 Messages</h4>
<div class="paragraph">
<p>When a transaction which raises the <code>send_message_to_l1</code> syscall is included in a state update, the following <a href="../Data_Availability/on-chain-data.html#format">data</a> reaches L1:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>l2 sender address</p>
</li>
<li>
<p>l1 destination address</p>
</li>
<li>
<p>payload size</p>
</li>
<li>
<p>payload (list of field elements)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consequently, the fee associated with a single l2→l1 message is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\text{gas_price}\cdot c_w\cdot(3+\text{payload_size})\]
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deployed_contracts"><a class="anchor" href="#_deployed_contracts"></a>Deployed Contracts</h4>
<div class="paragraph">
<p>When a transaction which raises the <code>deploy</code> syscall is included in a state update, the following <a href="../Data_Availability/on-chain-data.html#format">data</a> reaches L1:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contract address</p>
</li>
<li>
<p>class hash</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consequently, the fee associated with a single deployment is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\text{gas_price}\cdot 2 c_w\]
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overall_fee"><a class="anchor" href="#_overall_fee"></a>Overall Fee</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fee for a transaction with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cairo usage represented by the vector \(v\) (the entries of \(v\) correspond to the number of steps and number of applications per builtin)</p>
</li>
<li>
<p>\(n\) unique contract updates</p>
</li>
<li>
<p>\(m\) unique key updates</p>
</li>
<li>
<p>\(t\) messages with payload sizes \(q_1,...,q_t\)</p>
</li>
<li>
<p>\(\ell\) contract deployments</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>is given by:</p>
</div>
<div class="stemblock">
<div class="content">
\[F = \text{gas_price}\cdot\left(\max_k v_k w_k + c_w\left(2(n+m) + 3t + \sum\limits_{i=1}^t q_i + 2\ell\right)\right)\]
</div>
</div>
<div class="paragraph">
<p>where \(w\) is the weights vector discussed above and \(c_w\) is the calldata cost (in gas) per 32 byte word.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_is_the_fee_charged"><a class="anchor" href="#_when_is_the_fee_charged"></a>When is the fee charged?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fee is charged atomically with the transaction execution on L2. The StarkNet OS injects a transfer of the fee-related ERC-20, with an amount equal to the fee paid, sender equals to the transaction submitter, and the sequencer as a receiver.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <div class="footer-left">
      <p>Built with ✨ by the Starknet community</p>
    </div>
    <strong></strong>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://twitter.com/@Starknet" title="Twitter" target="_blank" class="footer_icon">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" font-size="1.25rem" aria-hidden="true" focusable="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg>
          <p>Twitter</p>
        </a>
        <a href="https://starknet.io/discord" title="Discord" target="_blank" class="footer_icon">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" font-size="1.25rem" aria-hidden="true" focusable="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg>
          <p>Discord</p>
        </a>
        <a href="https://github.com/starknet-io/starknet-docs" title="GitHub" target="_blank" class="footer_icon">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" font-size="1.25rem" aria-hidden="true" focusable="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
          <p>GitHub</p>
        </a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="_/js/site.js?new"></script>
<script async src="_/js/vendor/highlight.js?new"></script>
<script async src="_/js/vendor/tabs-block-behaviour.js?new"></script>
<script async src="_/js/vendor/swagger-ui.js?new"></script>
<script async src="_/js/vendor/component-versions.js?new"></script>
<script src="_/js/vendor/custom.js?new"></script>
<script async src="_/js/vendor/tabs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<script src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/algoliasearch@4.14.3/dist/algoliasearch-lite.umd.js"
    integrity="sha256-dyJcbGuYfdzNfifkHxYVd/rzeR6SLLcDFYEidcybldM="
    crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-plugin-recent-searches"></script>
<script src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-plugin-query-suggestions"></script>

<script>
  const { createQuerySuggestionsPlugin } = window['@algolia/autocomplete-plugin-query-suggestions'];
  const { createLocalStorageRecentSearchesPlugin, search } = window['@algolia/autocomplete-plugin-recent-searches'];
  const { algoliasearch } = window;
  const { autocomplete, getAlgoliaResults, getAlgoliaFacets} = window["@algolia/autocomplete-js"]
</script>

<script>
  function createLocalStorageRecentlyViewedItems(params) {
      const {
        onReset,
        onSubmit,
        subscribe,
        ...plugin
      } = createLocalStorageRecentSearchesPlugin({
        ...params,
        search(params) {
          if (params.query) {
            return [];
          }

          return search(params);
        },
        transformSource({ source, onRemove, state }) {
          const transformedSource = params.transformSource
            ? params.transformSource({ source, onRemove, state })
            : source;

          return {
            ...transformedSource,
            getItemUrl({ item }) {
              return item.url;
            },
            templates: {
              ...transformedSource.templates,
              header({html}) {
                return (html`
                  <div>
                    <span class="aa-SourceHeaderTitle">Recently viewed</span>
                  </div>
                `);
              },
              item({ item, components, html }) {

               const removeRecentItem = (event) => {
                    event.preventDefault();
                    event.stopPropagation();
                    onRemove(item.id);
                }

                return (html`
                  <a class="aa-ItemLink" href=${item.url}>
                    <div class="aa-ItemContent">
                      <div class="aa-ItemIcon aa-ItemIcon--noBorder">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12.516 6.984v5.25l4.5 2.672-0.75 1.266-5.25-3.188v-6h1.5zM12 20.016q3.281 0 5.648-2.367t2.367-5.648-2.367-5.648-5.648-2.367-5.648 2.367-2.367 5.648 2.367 5.648 5.648 2.367zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z" />
                        </svg>
                      </div>
                      <div class="aa-ItemContentBody">
                        <div class="aa-ItemContentTitle">
                          ${components.Highlight({ attribute: 'title', hit: item })}
                        </div>
                      </div>
                    </div>
                    <div class="aa-ItemActions">
                      <button
                        class="aa-ItemActionButton aa-ItemActionButtonDanger"
                        title="Remove this search"
                        onclick=${event => removeRecentItem(event)}
                      >
                        <svg
                          viewBox="0 0 24 24"
                          width="18"
                          height="18"
                          fill="currentColor"
                        >
                          <path d="M18 7v13c0 0.276-0.111 0.525-0.293 0.707s-0.431 0.293-0.707 0.293h-10c-0.276 0-0.525-0.111-0.707-0.293s-0.293-0.431-0.293-0.707v-13zM17 5v-1c0-0.828-0.337-1.58-0.879-2.121s-1.293-0.879-2.121-0.879h-4c-0.828 0-1.58 0.337-2.121 0.879s-0.879 1.293-0.879 2.121v1h-4c-0.552 0-1 0.448-1 1s0.448 1 1 1h1v13c0 0.828 0.337 1.58 0.879 2.121s1.293 0.879 2.121 0.879h10c0.828 0 1.58-0.337 2.121-0.879s0.879-1.293 0.879-2.121v-13h1c0.552 0 1-0.448 1-1s-0.448-1-1-1zM9 5v-1c0-0.276 0.111-0.525 0.293-0.707s0.431-0.293 0.707-0.293h4c0.276 0 0.525 0.111 0.707 0.293s0.293 0.431 0.293 0.707v1zM9 11v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1zM13 11v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1z" />
                        </svg>
                      </button>
                    </div>
                  </a>
                `);
              }
            }
          };
        }
      });

      const { getAlgoliaSearchParams, ...data } = plugin.data;

      return {
        ...plugin,
        data
      };
    }
</script>

<script>
  function createMostPopularSearchesPlugin(){
    const popularSearchers = createQuerySuggestionsPlugin({
      searchClient,
      indexName: 'web_query_suggestions_dev',
      getSearchParams({ state }) {
        return { hitsPerPage: 3 };
      },
      transformSource({ source, onTapAhead }) {
        const onSelectSuggestion = (event, item) => {
          event.preventDefault();
          event.stopPropagation();
          onTapAhead(item)
        };

        return {
          ...source,
          templates: {
            ...source.templates,
            header({ state, html }) {
              if (state.query) {
                return null;
              }

              return (html`
                <div>
                  <span className="aa-SourceHeaderTitle">Popular searches</span>
                </div>
              `);
            },
            item({html, item}){


              return (html`
                <div class="aa-ItemWrapper" onclick=${event => onSelectSuggestion(event, item)}>
                  <div class="aa-ItemContent">
                    <div class="aa-ItemIcon aa-ItemIcon--noBorder">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path d="M16.041 15.856c-0.034 0.026-0.067 0.055-0.099 0.087s-0.060 0.064-0.087 0.099c-1.258 1.213-2.969 1.958-4.855 1.958-1.933 0-3.682-0.782-4.95-2.050s-2.050-3.017-2.050-4.95 0.782-3.682 2.050-4.95 3.017-2.050 4.95-2.050 3.682 0.782 4.95 2.050 2.050 3.017 2.050 4.95c0 1.886-0.745 3.597-1.959 4.856zM21.707 20.293l-3.675-3.675c1.231-1.54 1.968-3.493 1.968-5.618 0-2.485-1.008-4.736-2.636-6.364s-3.879-2.636-6.364-2.636-4.736 1.008-6.364 2.636-2.636 3.879-2.636 6.364 1.008 4.736 2.636 6.364 3.879 2.636 6.364 2.636c2.125 0 4.078-0.737 5.618-1.968l3.675 3.675c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414z"></path>
                        </svg>
                    </div>
                    <div class="aa-ItemContentBody">
                        <div class="aa-ItemContentTitle">${item.query}</div>
                    </div>
                  </div>
                  <div class="aa-ItemActions">
                    <button class="aa-ItemActionButton" title=${`Fill query with "${item.query}"`}>
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path d="M8 17v-7.586l8.293 8.293c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414l-8.293-8.293h7.586c0.552 0 1-0.448 1-1s-0.448-1-1-1h-10c-0.552 0-1 0.448-1 1v10c0 0.552 0.448 1 1 1s1-0.448 1-1z"></path>
                        </svg>
                    </button>
                  </div>
                </div>
              `)
            }
          },
          onSelect({event, item, setIsOpen, itemInputValue, setQuery, refresh, ...rest}) {
            setIsOpen(true);
          },
        };
      },
    })

    return popularSearchers
  }
</script>

<script>
    const appId = "VHYJO45TI4";
    const apiKey = "9d5f273e78238a8c505526e481c857f7";
    const searchClient = algoliasearch(appId, apiKey);
    const hitsPerPage = 20

    function getSources({ query, state }) {
        if (!query) {
          return [];
        }

        return [
          {
            sourceId: "docs",
            getItems() {
              return getAlgoliaResults({
                searchClient,
                queries: [
                  {
                    indexName: "starknet-docs-master",
                    query,
                    params: {
                      attributesToSnippet: ["title:8", "content:10"],
                      snippetEllipsisText: "…",
                      hitsPerPage,
                    }
                  }
                ]
              });
            },
            getItemUrl({ item }) {
              return `${item.url}`;
            },
            onSelect({ item }) {
              recentlyViewedItems.data.addItem({
                id: item.objectID,
                title: item.title || item.content,
                url: item.url
              });
            },
            templates: {
              header({html, items}) {
                if(items.length === 0){
                  return null
                }
                return (
                  html`<span class="aa-SourceHeaderTitle">Documentation</span>`
                );
              },
              item({ item: hit, components, html}) {
                return (html`
                    <a href=${hit.url} class="aa-ItemLink">
                      <div class="aa-ItemContent">
                        <div class="aa-ItemIcon aa-ItemIcon--noBorder">
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M19.5999 9.99999C19.5999 15.3019 15.3018 19.6 9.9999 19.6C4.69797 19.6 0.399902 15.3019 0.399902 9.99999C0.399902 4.69806 4.69797 0.399994 9.9999 0.399994C15.3018 0.399994 19.5999 4.69806 19.5999 9.99999ZM17.7961 10.2449C17.6667 14.4394 14.2258 17.8 9.9999 17.8C5.69208 17.8 2.1999 14.3078 2.1999 9.99999C2.1999 6.55187 4.43732 3.62632 7.53954 2.59597L6.31196 4.74422C5.92196 5.42673 6.03701 6.28582 6.59284 6.84165C7.12339 7.37219 7.9339 7.50372 8.60499 7.16818L8.81467 7.06334C8.89798 7.02168 8.98985 6.99999 9.083 6.99999H9.25807C9.48534 6.99999 9.69309 7.1284 9.79473 7.33167C9.87919 7.50058 9.87919 7.69941 9.79473 7.86832L9.76138 7.93502C9.68018 8.09741 9.51421 8.19999 9.33265 8.19999H8.73006C7.82327 8.19999 6.97648 8.65319 6.47348 9.40768L6.42091 9.48654C5.98984 10.1331 5.88144 10.9426 6.12719 11.6798C6.37831 12.4331 6.97335 13.0237 7.72395 13.2739C8.00786 13.3685 8.19971 13.635 8.19971 13.9298V15.1895C8.19971 15.9685 8.8312 16.6 9.61018 16.6C10.0387 16.6 10.4439 16.4052 10.7116 16.0706L12.6452 13.6536C12.8747 13.3667 12.9997 13.0103 12.9997 12.643C12.9997 12.2639 13.1533 11.8949 13.4236 11.6246C13.9704 11.0778 14.0636 10.2141 13.6307 9.56485L13.074 8.72974C13.0256 8.65709 12.9997 8.57174 12.9997 8.48444C12.9997 8.12003 13.4157 7.91201 13.7073 8.13066L14.1185 8.4391C14.4975 8.7233 15.0044 8.76847 15.4274 8.55695C15.6984 8.42147 16.0258 8.47464 16.2395 8.68826L17.7961 10.2449Z" fill="currentColor"/>
                          </svg>
                        </div>
                        <div class="aa-ItemContentBody">
                          <div class="aa-ItemContentTitle">
                            ${components.Highlight({ attribute: 'value', hit: hit['_snippetResult'].content })}
                          </div>
                          <div class="aa-ItemContentSubtitle">
                            ${components.Highlight({ attribute: 'value', hit: hit['_snippetResult'].title })}
                          </div>
                        </div>
                      </div>
                      <div class="aa-ItemActions">
                        <button
                          class="aa-ItemActionButton"
                          title="Visit this link"
                        >
                          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.35103 3.1786C9.69424 3.53815 9.68099 4.10784 9.32144 4.45105L4.34632 9.20003H16.35C19.9122 9.20003 22.8 12.0878 22.8 15.65C22.8 19.2123 19.9122 22.1 16.35 22.1H12.9C12.403 22.1 12 21.6971 12 21.2C12 20.703 12.403 20.3 12.9 20.3H16.35C18.9181 20.3 21 18.2182 21 15.65C21 13.0819 18.9181 11 16.35 11H4.34632L9.32144 15.749C9.68099 16.0922 9.69424 16.6619 9.35103 17.0215C9.00783 17.381 8.43813 17.3943 8.07858 17.051L1.47858 10.751C1.30067 10.5812 1.20001 10.346 1.20001 10.1C1.20001 9.85407 1.30067 9.61883 1.47858 9.44901L8.07858 3.14901C8.43813 2.8058 9.00783 2.81905 9.35103 3.1786Z" fill="currentColor"/>
                          </svg>
                        </button>
                      </div>
                    </a>
                  `)
              },
              noResults({state, html}) {
                return (html`
                  No results for <bold>"${state.query}"</bold> 😕
                `);
              }
            }
          }
        ];
    };

    const recentlyViewedItems = createLocalStorageRecentlyViewedItems({
      key: "RECENTLY_VIEWED",
      limit: 5
    });

    const mostPopulerSearches = createMostPopularSearchesPlugin()

    autocomplete({
      container: "#autocomplete",
      placeholder: "Search",
      openOnFocus: true,
      detachedMediaQuery: "",
      getSources,
      plugins: [recentlyViewedItems, mostPopulerSearches],
    });
</script>

<script>
  const modalBreakpoint = 680;
  const modalClassname = 'aa-DetachedContainer--modal'

  function toggleAlgoliaModal(){
      const algoliaDetachedContainer = document.querySelector('.aa-DetachedContainer')
      if(!algoliaDetachedContainer){
        return
      }
      const documentWidth = document.documentElement.clientWidth;
      if(documentWidth >= modalBreakpoint){
        algoliaDetachedContainer.classList.add(modalClassname)
      }else {
        algoliaDetachedContainer.classList.remove(modalClassname)
      }
  }

  // Attaching the event listener function to window's resize event
  window.addEventListener("resize", toggleAlgoliaModal);

  // Calling the function for the first time
  toggleAlgoliaModal();

</script>
  </body>
</html>
